---
permalink: tenant/grid-federation-clone-keys-with-api.html
sidebar: sidebar
keywords: s3 access key, secret key id, account clone, tenant manager api
summary: If your tenant account has the Use grid federation connection permission, you can use the Tenant Management API to manually clone S3 access keys from the tenant on the source grid to the tenant on the destination grid.
---
= Clone S3 access keys using the API
:icons: font
:imagesdir: ../media/

[.lead]
If your tenant account has the *Use grid federation connection* permission, you can use the Tenant Management API to manually clone S3 access keys from the tenant on the source grid to the tenant on the destination grid.

.What you'll need

* The tenant account has the *Use grid federation connection* permission. 
* The grid federation connection has a *Connection status* of *Connected*.
* You are signed in to the Tenant Manager on the tenant's source grid using a xref:../admin/web-browser-requirements.adoc[supported web browser].
* You have the Root access or Manage your own S3 credentials permission for the tenant account. See xref:tenant-management-permissions.adoc[Tenant management permissions].
* You will be cloning your own access key, or you have already created each user whose access key you will be cloning.

== Clone your own access key

. Using the Tenant Manager, xref:creating-your-own-s3-access-keys.adoc[create your own access keys] and download the `.csv` file.

. From the top of the Tenant Manager, select the help icon and select *API documentation*.

. In the *s3* section, select the following endpoint:
+
`POST /org/users/current-user/replicate-s3-access-key`

. Select *Try it out*.

. In the *body* text box, replace the example entries for *accessKey* and *secretAccessKey* with the values from the *.csv* file you downloaded.
+
Be sure to retain the double quotes around each string.

. Optionally, replace the entry for *expires* with the expiration date and time in UTC seconds. If the key will not expire, enter *null* as value for the *expires* entry (or remove the *Expires* line and the preceding comma).
+
image::../media/grid-federation-clone-access-key.png[Tenant Manager API entering values to clone access key]

. Select *Execute*.

. Confirm that the server response code is *204*, indicating that the key was successfully cloned to the other grid. 

== Clone another user's access keys

. Using the Tenant Manager, xref:creating-another-users-s3-access-keys.adoc[create the other user's S3 access keys] and download the `.csv` file.

. From the top of the Tenant Manager, select the help icon and select *API documentation*.

. Obtain the user ID. You will need this value to clone the other user's access keys.

.. From the *users* section, select the following endpoint:
+
`GET /org/users`

.. Select *Try it out*.

.. Specify any parameters you want to use when looking up users. 

.. Select *Execute*.

.. Find the user whose keys you want to clone, and copy the number in the *id* field. 

. In the *s3* section, select the following endpoint:
+
`POST /org/users/{userId}/replicate-s3-access-key`

. Select *Try it out*.

. In the *userId* text box, paste the user ID you copied.

. In the *body* text box, replace the entries for *example access key* and *secret access key* with the values from the *.csv* file for that user.
+
Be sure to retain the double quotes around the string.

. Optionally, replace the entry for *expires* with the expiration date and time in UTC seconds. If the key will not expire, enter *null* as value for the *expires* entry (or remove the *Expires* line and the preceding comma).

. Select *Execute*.

. Confirm that the server response code is *204*, indicating that the key was successfully cloned to the other grid. 
