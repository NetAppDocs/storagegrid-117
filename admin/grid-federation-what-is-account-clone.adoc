---
permalink: admin/grid-federation-what-is-account-clone.html
sidebar: sidebar
keywords: account clone, tenant replication, disaster recovery, grid federation
summary: 'Account clone is the replication of tenant accounts, tenant groups, tenant users, and, optionally, S3 access keys between a source StorageGRID system and a destination StorageGRID system.'
---
= What is account clone?
:icons: font
:imagesdir: ../media/

[.lead]
Account clone is the replication of tenant accounts, tenant groups, tenant users, and, optionally, S3 access keys between a source StorageGRID system and a destination StorageGRID system. Account clone is required for cross-grid replication. Cloning account information from a source grid to a destination grid ensures that tenant users and groups can access the corresponding buckets and objects on either grid.

== Workflow for account clone

The workflow diagram shows the steps that grid administrators and permitted tenants will perform to set up account clone. These steps can only be performed after the grid federation connection is configured.

image:../media/grid-federation-account-clone-workflow.png[workflow for cross-grid replication]

== How are tenant accounts cloned?

After creating a link:grid-federation-overview.html[grid federation connection], a grid admin can create new S3 tenant accounts on either grid. Tenants that have the *Use grid federation connection* permission can be allowed to use one or more grid federation connections. When the new tenant is saved, StorageGRID automatically creates a replica of that tenant on the other grid.

The grid where the tenant is originally created is known as the tenant's _source grid_. The grid where the tenant is replicated to is known as the tenant's _destination grid_. Both tenant accounts have the same account ID, name, storage quota, and assigned permissions, but the tenant replicated to the destination grid has fewer capabilities and does not initially have a root user password.

NOTE: You can only add the *Use grid federation connection* when you are creating a new S3 tenant; you can't add this permission to an existing tenant.

.Learn more
xref:grid-federation-manage-tenants.adoc[Manage permitted tenants for grid federation]

== How are groups, users, and S3 access keys cloned?

After tenants have been created and replicated, new groups and users are automatically cloned from the tenant's source grid to the tenant's destination grid.

image:../media/grid-federation-account-clone.png[image showing that tenant details are cloned from source grid to destination grid]

As shown in the figure:

* Local tenant groups and users created on the source grid are automatically cloned to the destination grid. The group permissions and S3 policy are the same.

* Assuming the requirements for <<account-clone-sso,single sign-on>> and <<account-clone-identity-federation,identity federation>> have been met, federated groups created (imported) for the tenant on the source grid are automatically cloned to the tenant on the destination grid. Both groups have the same access mode, group permissions and S3 group policy.

* After a federated group is created on the source grid, federated users can sign in to the source grid. However, federated user can't sign in to the destination grid unless their S3 access keys are manually cloned to the destination grid.

* Optionally, S3 access keys created on the source grid can be manually cloned to the destination grid.
+ 
For security reasons, StorageGRID does not automatically clone S3 access keys from the tenant's source grid to the destination grid. If tenant users need to access the buckets on both grids, you must use the Tenant Manager API to manually copy the keys from the source grid to the destination grid. See xref:../tenant/grid-federation-clone-keys-with-api.adoc[Clone S3 access keys using the API].

Note that account cloning occurs in one direction only. If you import or create groups, users, and S3 access keys on the tenant's destination grid, these items are not cloned back to the source grid. 

image:../media/grid-federation-account-not-cloned.png[image showing that tenant details are cloned back to source grid]

Also note that any edits made to the tenant, users, groups, or access keys on either grid are not cloned to the other grid. 

.Learn more

xref:../tenant/grid-federation-account-clone.adoc[Clone account information]

== [[account-clone-sso]]Considerations and requirements for SSO

If either StorageGRID system in the connection uses single sign-on (SSO), both grids must use SSO. The grid admins for the tenant's source and destination grids must perform these steps before creating permitted tenant accounts:

. Configure the same identity source for both grids. See xref:using-identity-federation.adoc[Use identity federation].

. Configure the same SSO identity provider (IdP) for both grids. See xref:configuring-sso.adoc[Configure single sign-in].

. xref:managing-admin-groups.adoc[Create the same admin group] on both grids by importing the same federated group.
+
When you create the tenant, you will select this group to have the initial Root access permission for both the source and destination tenant accounts. 
+
IMPORTANT: If this admin group doesn't exist on both grids before you create the tenant, the tenant won't be replicated to the destination.

== [[account-clone-identity-federation]]Considerations and requirements for identity federation

Identity federation can be configured for the entire grid, or each tenant can be granted permission to configure its own identity source. 

=== Considerations for grid-level identity federation

If either grid in the connection has identity federation configured, both grids must use identity federation. The grid admins for the tenant's source and destination grids must perform these steps before creating tenant accounts:

. Configure the same identity source for both grids. See xref:using-identity-federation.adoc[Use identity federation].

. Optionally, xref:managing-admin-groups.adoc[create the same admin group] on both grids by importing the same federated group.
+
When you create the tenant, you can select this group to have initial Root access permission for both the source and destination tenant accounts, or you can specify a password for the local root user.
+
IMPORTANT: If you select a federated group on the source grid to have root access permission and that federated group doesn't already exist on both grids, the tenant won't be replicated to the destination.

=== Considerations for tenant-level identity federation

If you create a tenant and assign both the *Use grid federation connection* permission and the *Use own identity source* permission, both the source tenant and its replica must configure the same identity source before the source tenant creates any groups. If the destination grid doesn't have the same identity source, groups added to the source grid cannot be cloned.





