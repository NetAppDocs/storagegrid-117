---
permalink: admin/use-s3-setup-wizard-steps.html
sidebar: sidebar
keywords: FabricPool and S3 setup wizard, object storage system, S3 application
summary: 'You can use the S3 setup wizard to configure StorageGRID as the object storage system for an S3 application.'
---
= Access and complete the S3 setup wizard
:icons: font
:imagesdir: ../media/

[.lead]
You can use the S3 setup wizard to configure StorageGRID for use with an S3 application. The setup wizard provides the values the application needs to access a StorageGRID bucket and to save objects.

NOTE: You must have Root access permission to access the wizard.

== Access the wizard

. Sign in to the Grid Manager using a xref:../admin/web-browser-requirements.adoc[supported web browser].

. If the *FabricPool and S3 setup wizard* banner appears on the dashboard, select the link in the banner. If the banner no longer appears, select the help icon from the header bar in the Grid Manager and select *FabricPool and S3 Setup Wizard*.
+
image::../media/help_menu.png[help menu]
. In the S3 application section of the FabricPool and S3 setup wizard page, select *Configure now*.
+
*Step 1 of 6: Configure HA group* appears.

== Step 1 of 6: Configure HA group
A high availability (HA) group is a collection of nodes that each contain the StorageGRID Load Balancer service. An HA group can contain Gateway Nodes, Admin Nodes, or both.

You can use an HA group to help keep the S3 data connections available. If the active interface in the HA group fails, a backup interface can manage the workload with little impact to S3 operations.

For details about this task, see xref:../admin/managing-high-availability-groups.adoc[Manage high availability groups].

. If you plan to use an external load balancer, you do not need to create an HA group. Select *Skip this step* and go to <<Step 2 of 6: Configure load balancer endpoint>>.

. To use the StorageGRID load balancer, you can create a new HA group or use an existing HA group.


// start tabbed area

[role="tabbed-block"]
====

.Create HA group
--

.. To create a new HA group, select *Create HA group*.

.. For the *Enter details* step, complete the following fields.
+
[cols="1a,2a" options="header"]
|===
| Field| Description

|HA group name
|A unique display name for this HA group.

|Description (optional)
|The description of this HA group.

|===

.. For the *Add interfaces* step, select the node interfaces you want to use in this HA group.
+
Use the column headers to sort the rows, or enter a search term to locate interfaces more quickly.
+ 
You can select one or more nodes, but you can select only one interface for each node.

.. For the *Prioritize interfaces* step, determine the Primary interface and any backup interfaces for this HA group.
+
Drag and drop rows to change the values in the *Priority order* column.
+
The first interface in the list is the Primary interface. The Primary interface is the active interface unless a failure occurs.
+
If the HA group includes more than one interface and the active interface fails, the virtual IP (VIP) addresses move to the first backup interface in the priority order. If that interface fails, the VIP addresses move to the next backup interface, and so on. When failures are resolved, the VIP addresses move back to the highest priority interface available.

.. For the *Enter IP addresses* step, complete the following fields.
+
[cols="1a,2a" options="header"]
|===
| Field| Description

|Subnet CIDR
|The address of the VIP subnet in CIDR notation&#8212; an IPv4 address followed by a slash and the subnet length (0-32). 

The network address must not have any host bits set. For example, `192.16.0.0/22`.

|Gateway IP address (optional)
|Optional. If the S3 IP addresses used to access StorageGRID are not on the same subnet as the StorageGRID VIP addresses, enter the StorageGRID VIP local gateway IP address. The local gateway IP address must be within the VIP subnet.

|Virtual IP address
|Enter at least one and no more than ten VIP addresses for the active interface in the HA group. All VIP addresses must be within the VIP subnet.

At least one address must be IPv4. Optionally, you can specify additional IPv4 and IPv6 addresses.

|===

.. Select *Create HA group* and then select *Finish* to return to the S3 setup wizard.
.. Select *Continue* to go to the load balancer step.
--

.Use existing HA group
--
.. To use an existing HA group, select the HA group name from the *Select an HA group* drop-down list. 
.. Select *Continue* to go to the load balancer step. 
--
====

// end tabbed area


== Step 2 of 6: Configure load balancer endpoint

StorageGRID uses a load balancer to manage the workload from client applications. Load balancing maximizes speed and connection capacity across multiple Storage Nodes.

You can use the StorageGRID Load Balancer service, which exists on all Gateway and Admin Nodes, or you can connect to an external (third-party) load balancer. Using the StorageGRID load balancer is recommended.

For details about this task, see xref:../admin/managing-load-balancing.adoc[Considerations for load balancing].

To use the StorageGRID Load Balancer service, select the *StorageGRID load balancer* tab and then create or select the load balancer endpoint you want to use. To use an external load balancer, select the *External load balancer* tab and provide details about the system you have already configured. 

[role="tabbed-block"]
====

.Create endpoint
--

. To create a load balancer endpoint, select *Create endpoint*.
. For the *Enter endpoint details* step, complete the following fields.
+
[cols="1a,2a" options="header"]
|===
|Field| Description

|Name
|A descriptive name for the endpoint.

|Port
|The StorageGRID port you want to use for load balancing. This field defaults to 10433 for the first endpoint you create, but you can enter any unused external port. If you enter 80 or 443, the endpoint is configured only on Gateway Nodes, since these ports are reserved on Admin Nodes.

*Note:* Ports used by other grid services are not permitted. See the 
xref:../network/network-port-reference.adoc[Network port reference].

|Client type
|Must be *S3*.

|Network protocol
|Select *HTTPS*.

*Note*: Communicating with StorageGRID without TLS encryption is supported but not recommended.

|===

. For the *Select binding mode* step, specify the binding mode. The binding mode controls how the endpoint is accessed&#8212;using any IP address or using specific IP addresses and network interfaces.
+
[cols="1a,2a" options="header"]
|===
|Option| Description

|Global
|Clients can access the endpoint using the IP address of any Gateway Node or Admin Node, or the virtual IP (VIP) address of any HA group. This is the default and recommended setting.

|Node interfaces
|Clients can only access the endpoint using the IP address of a selected node and network interface.

|HA groups VIPs
|Clients can only access the endpoint using a VIP address of an HA group. Use this selection only if you require much higher levels of isolation of workloads.

|===

. For the Tenant access step, select one of the following:
+
[cols="1a,2a" options="header"]
|===
|Field	
|Description

|Allow all tenants (default)

|All tenant accounts can use this endpoint to access their buckets.

|Allow selected tenants

|Only the selected tenant accounts can use this endpoint to access their buckets.

|Block selected tenants

|The selected tenant accounts cannot use this endpoint to access their buckets. All other tenants can use this endpoint.
|===

. For the *Attach certificate* step, select one of the following:
+
[cols="1a,2a" options="header"]
|===
|Field| Description

|Upload certificate (recommended)
|Use this option to upload a CA-signed server certificate, certificate private key, and optional CA bundle.

|Generate certificate
|Use this option to generate a self-signed certificate. See xref:../admin/configuring-load-balancer-endpoints.adoc[Configure load balancer endpoints] for details of what to enter.

|Use StorageGRID S3 and Swift certificate
|Use this option only if you have already uploaded or generated a custom version of the StorageGRID global certificate. See xref:../admin/configuring-custom-server-certificate-for-storage-node.adoc[Configure S3 and Swift API certificates] for details. 

|===

. Select *Finish* to return to the S3 setup wizard.

. Select *Continue* to go to the tenant and bucket step. 

NOTE: Changes to an endpoint certificate can take up to 15 minutes to be applied to all nodes.
--

.Use existing load balancer endpoint
--
. To use an existing endpoint, select its name from the *Select a load balancer endpoint* drop-down list. 
. Select *Continue* to go to the tenant and bucket step. 
--


.Use external load balancer
--

. To use an external load balancer, complete the following fields.
+
[cols="1a,2a" options="header"]
|===
| Field| Description

|FQDN
|The fully qualified domain name (FQDN) of the external load balancer.

|Port
|The port number that the S3 application will use to connect to the external load balancer.

|Certificate
|Copy the server certificate for the external load balancer and paste it into this field.

|===

. Select *Continue* to go to the tenant and bucket step. 

--
====

// end tabbed area


== Step 3 of 6: Create tenant and bucket

A tenant is an entity that can use S3 applications to store and retrieve objects in StorageGRID. Each tenant has its own users, access keys, buckets, objects, and a specific set of capabilities. You must create a StorageGRID tenant before you can create the bucket that the S3 application will use. 

A bucket is a container used to store a tenant's objects and object metadata. Although some tenants might have many buckets, the wizard helps you to create a  tenant and a bucket in the quickest and easiest way. You can use the Tenant Manager later to add any additional buckets you need.

You can create a new tenant for this S3 application to use. Optionally, you can also create a bucket for the new tenant. Finally, you can allow the wizard to create the S3 access keys for the tenant's root user.

For details about this task, see xref:../admin/creating-tenant-account.adoc[Create tenant account] and 
xref:../tenant/creating-s3-bucket.adoc[Create S3 bucket].

// start tabbed area

To create a new tenant and bucket (optional):

. Select *Create tenant*.

. Enter the following tenant details:
+

[cols="1a,2a" options="header"]

|===
| Field| Description

|Name
|The name for the tenant account. For example, `S3 tenant`. 

|Description (optional)
|A description that helps you identify the tenant.

|Client type
|This field is disabled. Client must be *S3*.

|Storage quota (optional)
|If you want this tenant to have a storage quota, enter a numerical value for the quota and select the correct units (GB, TB, or PB).

|===

+
. For the *Select permission* step, select the appropriate permissions for the tenant. Some of these permissions have additional requirements. For details, see the online help for each permission.
+
* Allow platform services
* Use own identity source (selectable only if SSO is not being used)
* Allow S3 select (see xref:manage-s3-select-for-tenant-accounts.adoc[Manage S3 Select for tenant accounts])
 
. Define root access for the tenant account, based on whether your StorageGRID system uses xref:../admin/using-identity-federation.adoc[identity federation], xref:../admin/configuring-sso.adoc[single sign-on (SSO)], or both. 
+
[cols="1a,2a" options="header"]
|===
| Option 
| Do this

|If identity federation is not enabled 
|Specify the password to use when signing into the tenant as the local root user.

|If identity federation is enabled
|Select an existing federated group to have Root access permission for the tenant.

Optionally specify the password to use when signing in to the tenant as the local root user.

|If both identity federation and single sign-on (SSO) are enabled
|Select an existing federated group to have Root access permission for the tenant. No local users can sign in.

|===
+

. If you want the wizard to create the access key ID and secret access key for the root user, select *Create root user S3 access key automatically*. 
+

IMPORTANT: Select this option if the only user for the tenant will be the root user. If other users will use this tenant, use Tenant Manager to configure keys and permissions.
+


. Create a bucket for the tenant's objects.

.. For *Bucket name*, enter the name of the bucket that the S3 application will use. For example, `S3-bucket`.
+
IMPORTANT: You cannot change the bucket name after creating the bucket.

.. Select the *Region* for this bucket.
+
Use the default region (us-east-1) unless you expect to use ILM in the future to filter objects based on the bucket's region.
+

.. Select *Enable object versioning* if you want to store each version of each object in this bucket. 

.. Use *Create tenant only* to just create a tenant, else select *Create tenant and bucket* and go to the download data step.

== Step 4 of 6: Download S3 settings

In the download data step, you can download the access key file (if generated by the wizard) and the configuration values file and save them in a safe location. 

. Select *Download access keys* to download the credentials details: tenant account name, access key ID, and secret access key.

IMPORTANT: *Download access keys* appears only if you had selected *Create root user S3 access key automatically* during tenant creation.

. Select *Download configuration values* to download settings for the load balancer endpoint, tenant, bucket, and the root user.

. Select *Continue* to go to the ILM rule step.

== Step 5 of 6: Review ILM rule and ILM policy for S3

Information lifecycle management (ILM) rules control the placement, duration, and ingest behavior of all objects in your StorageGRID system.

For details about this step, see xref:../ilm/access-create-ilm-rule-wizard.adoc[Create ILM rule] and xref:../ilm/creating-ilm-policy.adoc[Create ILM policy: Overview].

The ILM policy included with StorageGRID makes two replicated copies of all objects. This policy is in effect until you create a new proposed policy and activate it.

. Review the information in the Set ILM rule and ILM policy step to learn about creating a rule, creating a new policy, and simulating and activating that policy. 

. Select the checkbox to indicate that you understand what to do next.

. Select *Continue* to go to *Summary*.

== Step 6 of 6: Review summary 

. Review the summary and the next steps.
. Select *Finish*.
+

. Configure the application using the file you downloaded from StorageGRID or the values you obtained manually.