---
permalink: admin/grid-federation-manage-tenants.html
sidebar: sidebar
keywords: grid federation, manage tenant, use grid federation permission, remove permission, cross grid replication
summary: 'You can allow new S3 tenant accounts to use a grid federation connection between two StorageGRID systems. When tenants are allowed to use a connection, special steps are required to edit tenant details or to permanently remove tenant permission to use the connection.'
---
= Manage the permitted tenants for grid federation
:icons: font
:imagesdir: ../media/

[.lead]
You can allow new S3 tenant accounts to use a grid federation connection between two StorageGRID systems. When tenants are allowed to use a connection, special steps are required to edit tenant details or to permanently remove a tenant's permission to use the connection.

.What you'll need

* You are signed in to the Grid Manager on either grid using a xref:../admin/web-browser-requirements.adoc[supported web browser].
* You have the Root access permission for the grid you are signed in to. 
* You have xref:grid-federation-create-connection.adoc[created a grid federation connection] between two grids.

== Allow tenant to use grid federation connection
If you want to allow a tenant account to use a grid federation connection for account clone and cross-grid replication, follow the general instructions to xref:creating-tenant-account.adoc[create a new S3 tenant] and note the following:

* You must have Root access permission.

* You can create the tenant from either grid in the connection. The grid where a tenant is created is known as the _tenant's source grid_.

* The status of the connection must be *Connected*.

* You can only select the *Use grid federation connection* permission when you are creating a new S3 tenant; you can't enable this permission for an existing tenant.

* When the new tenant is saved on the first grid, an identical tenant is automatically created on the other grid. The grid where the cloned tenant is created is known as the _tenant's destination grid_.

* The tenants on both grids will have the same 20-digit account ID, name, description, quota, and permissions. However, for security reasons, the password for a local root user is not copied to the destination grid.  

* Before a local root user can access the cloned tenant on the destination grid, a grid administrator for that grid must xref:changing-password-for-tenant-local-root-user.adoc[change the password for the local root user].

* After the new tenant is available on both grids, tenant users can perform these operations:

** From the tenant's source grid, import or create tenant group and users, which are automatically cloned to the tenant's destination grid. See xref:../tenant/grid-federation-use-account-clone.adoc[Use account clone].
** From the tenant's source grid, create new S3 access keys, which can be optionally cloned to the tenant's destination grid. See xref:../tenant/tenant/grid-federation-clone-keys-with-api.adoc[Clone S3 access keys using the API].
** Create identical buckets on both grids in the connection and enable cross-grid replication in one direction or in both directions. See xref:../tenant/grid-federation-manage-cross-grid-replication.adoc[Manage cross-grid replication].

== Edit tenant with Use grid federation connection permission

If you need to edit a tenant that has the *Use grid federation connection* permission, follow the general instructions for xref:editing-tenant-account.adoc[editing a tenant account] and note the following:

* If a tenant has the *Use grid federation connection* permission, you can edit tenant details from either grid in the connection. However, any changes you make will not be copied to the other grid. If you want to keep the tenant details exactly in sync between grids, you must make the same edits on both grids.

* You can't select the *Use grid federation connection* permission when you are editing an existing tenant.

* If you need to remove the *Use grid federation connection* permission for a tenant, use the Grid federation page as described in the next section. You can't remove this permission by editing the tenant.

== Delete a tenant with Use grid federation connection permission

If you need to remove a tenant that has the *Use grid federation connection* permission, follow the general instructions for xref:deleting-tenant-account.adoc[deleting a tenant account] and note the following:

* Before you can remove the original tenant on the source grid, you must remove all buckets for the account on the source grid.

* Before you can remove the cloned tenant on the destination grid, you must remove all buckets for the account on the destination grid.

* If you remove either the original or the cloned tenant, the account can no longer be used for cross-grid replication. 

* If you are removing the original tenant on the source grid, any tenant groups, users, or keys that were cloned to the destination grid will be unaffected. You can either delete the cloned tenant or allow it to manage its own groups, users, access keys, and buckets.

* If you are removing the cloned tenant on the destination grid, clone errors will occur if new groups, users, or keys are added to the original tenant.
+
To avoid these errors,  remove the tenant's permission to use the grid federation connection before deleting the tenant from this grid.


== Remove Use grid federation connection permission

To prevent a tenant from using a grid federation connection, you must remove the *Use grid federation connection* permission. As shown in the figure, you can perform these steps on one or both grids in the connection, depending on your requirements. For example, you would perform these steps on only one grid if you wanted to prevent the tenant on grid 1 from replicating objects to grid 2 while still allowing the same tenant on grid 2 to replicate objects back to grid 1.

image:../media/grid-federation-remove-permission.png[steps to remove grid federation connection]

Before removing a tenant's permission to use a grid federation connection, note the following:

* Removing the *Use grid federation connection* permission from a tenant is a permanent action. You cannot re-enable the permission for this tenant.

* You cannot remove the *Use grid federation connection* permission if any of the tenant's buckets have cross-grid replication enabled. The tenant account must stop cross-grid replication for all of their buckets first. 

* Removing the *Use grid federation connection* permission does not delete any items that have already been copied between grids. For example, any tenant users, groups, and objects that exist on both grids are not deleted from either grid when the tenant's permission is removed. If you want to delete these items, you must manually delete them from both grids.

* When you remove the *Use grid federation connection* permission from a tenant account on one grid, the permission is not removed from the corresponding tenant on the other grid. Depending on your requirements, you might need to perform this procedure on both grids.

* You must remove the *Use grid connection* permission from all tenants on both sides of the connection before you can remove the grid federation connection itself. See xref:grid-federation-manage-connection.adoc[Manage grid federation connections] for details.

.What you'll need

* You are using a xref:../admin/web-browser-requirements.adoc[supported web browser].
* You have the Root access permission for both grids. 
* You have confirmed that cross-grid replication is stopped for all tenant buckets.

.Steps

. Sign in to the Grid Manager from the primary Admin Node.
. Select *CONFIGURATION* > *System* > *Grid federation*.
. Select the connection name to display its details page.
. On the *Permitted tenants* tab, select radio button for the tenant. 
. Select *Remove permission*.
. Review the warnings in the confirmation dialog box, and select *Remove*.

* If the permission can be removed, you are returned to the details page and a success message is shown. This tenant can no longer use the grid federation connection. Optionally, go to the other grid and repeat these steps to remove the permission for the same tenant on the other grid.

* If one or more tenant buckets still have cross-grid replication enabled, an error is displayed. You can do either of the following:

** (Recommended.) Sign in to the Tenant Manager and stop replication (permanently disable replication) for each of the tenant's buckets. See xref:../tenant/grid-federation-manage-cross-grid-replication.adoc[Manage cross-grid replication]. Then, repeat the steps to remove the *Use grid connection* permission.
** Remove the permission by force. See the next section.

== [[force_remove_permission]]Remove the permission by force

If necessary, you can force the removal of a tenant's permission to use a grid federation connection even if even if tenant buckets still have cross-grid replication enabled. When the permission is removed, data in these buckets can no longer be copied between the grids

. From the confirmation dialog box, select *Force remove*.
+
A success message appears. This tenant can no longer use the grid federation connection. However, tenant buckets might still have cross-grid replication enabled and some object copies might have already been replicated between the grids in the connection.

. As required, go to the other grid and repeat these steps to force-remove the permission for the same tenant account on the other grid.


