---
permalink: admin/grid-federation-manage-connection.html
sidebar: sidebar
keywords: grid federation, create connection, remove connection, view connection
summary: 'You can use a grid federation connection between two StorageGRID systems to replicate the object data in selected tenant buckets between grids (_cross-grid replication_). Follow these instructions to create and manage these connections.'
---
= Manage grid federation connections
:icons: font
:imagesdir: ../media/

[.lead]
You can use a grid federation connection between two StorageGRID systems to replicate the object data in selected tenant buckets between grids (_cross-grid replication_). Follow these instructions to create and manage these connections.

== Create a grid federation connection

To create a grid federation connection, you sign in to the first grid to enter connection details and download a verification package. To complete the grid federation connection, you sign in to the second grid, upload the verification package, and save and test the connection.

.What you'll need

* You are using a xref:../admin/web-browser-requirements.adoc[supported web browser].
* You have the Root access permission for both grids.
* You have the provisioning passphrase for both grids.
* You have configured high availability (HA) groups on both grids.
* If you plan to use fully qualified domain names (FQDN) for each grid (recommended), you have added the appropriate entries to your DNS server.


=== Start the connection on the first grid

To start a grid federation connection, enter connection details on the first grid and download the verification package.

Perform these steps on the StorageGRID system you want to start the connection from.

. Sign in to the Grid Manager.

. Select *CONFIGURATION* > *System* > *Grid federation*.

. Select *Add connection* > *Start a connection*.

. Enter details for the connection.
+
[cols="1a,3a" options="header"]
|===
| Field| Description

|Connection name
|A unique name to help you recognize this connection, for example, Grid A-Grid B connection.

|FQDN or IP for _local grid_ (Local)
|The FQDN of the grid you are currently signed into or a VIP address of an HA group on this grid.

|Port
|The port you want to use for this connection. You can enter any unused port number between 1 and 65,535.

Both grids in this grid federation connection will use the same port. You must ensure that no node in the HA groups for either grid uses this port for other connections.

|Certificate valid days
|The number of days you want the security certificate for this grid federation connection to be valid. This value defaults to 730 days (2 years), but you can enter any value between 1 and 762 days.

StorageGRID automatically generates this security certificate when you save the connection.

|Local grid provisioning passphrase 
|The provisioning passphrase for the grid you are signed in to.

|FQDN or IP for remote grid
|The FQDN of the grid you want to connect to or a VIP address of an HA group on the other grid.


|===

. Select *Save and continue*.

. For the Download verification package step, select *Download verification package*.
+
After you save and test the connection on the remote grid, you can no longer download the verification package.

. When the green checkmark appears, locate the downloaded file (`_connection-name_.grid-federation`), and select *Close*.

. Close the wizard to return to the Grid federation page. 

. Confirm that the new connection is shown and that the *Connection health* is set to *Waiting to connect*.

=== Complete the connection on the second grid

Perform these steps on the StorageGRID system you are connecting to.

. Sign in to the Grid Manager.

. Select *CONFIGURATION* > *System* > *Grid federation*.

. Select *Add connection* > *Upload verification file*. 

. Select *Upload verification file*.

. Browse to the file you downloaded from the other grid (`_connection-name_.grid-federation`) 
+
The details you entered are shown.
+
image:../media/grid_federation_upload.png[Grid federation-Upload verification package]

. Enter the provisioning passphrase for the grid you are currently signed in to.

. Select *Save and test*.
+
If the connection can be established, a success message appears. Otherwise, an error message appears. Review the message and address any issues.

. Close the wizard to return to the Grid federation page.

. Confirm that the new connection is shown and that the *Connection health* is set to *Healthy*.


== View and edit grid federation connections

You can view details for existing grid federation connections. You can also change the connection's name and rotate the associated certificate on both grids before it expires.

* To view basic information for all grid federation connections, review the table on the Grid federation page. 

* To view all details about a specific connection, select the connections's name in the table.

* To edit a grid federation connection, use the *Actions* menu on the Grid federation page or the details page for a specific connection.
+
IMPORTANT: After editing an connection, you might need to wait up to 15 minutes for your changes to be applied.
+
[cols="1a, 2a,2a" options="header"]
|===
|Task | Actions menu | Details page

|Edit connection details

|.. Select the check box for the connection. 
.. Select *Actions* > *Edit*.
.. Enter the new details.
.. Select *Save*.

|.. Select the connection name to display the details.
.. Select the edit icon image:../media/icon_edit_tm.png[Edit icon].
.. Enter the new details.
.. Select *Save*.

|Rotate connection certificate

|.. Select the check box for the connection. 
.. Select *Actions* > *Rotate certificate*.
.. Upload or generate a new custom certificate.
.. Select *Save changes*.

|.. Select the connection name to display the details.
.. Select the *Certificate* tab.
.. Select *Rotate certificate*.
.. Upload or generate a new custom certificate.
.. Select *Save changes*.

|Remove permission for tenant to use grid connection

|.. Select the Federation features tab.
.. For Account synchronization, select *View more*.
.. Select a tenant who is using a grid federation connection on this grid. 
.. Select *Remove relationship*.
.. Select *Yes*.


| 
|===



== Remove a grid federation connection

You can remove a grid federation connection at any time, and you can remove a connection from either grid.

After you remove a connection, you can no longer replicate object data between grids. However, any object data that was previously replicated between grids is not deleted. If you want to delete this information from either grid, you must delete it manually.

Perform these steps from either grid in the grid federation connection.

. Sign in to the Grid Manager.

. Select *CONFIGURATION* > *System* > *Grid federation*.

. On the Grid federation page, select the check box for each connection you want to remove. To remove all connections, select the check box in the table header.

. Select *Delete*.

. Review the confirmation message, and select *Yes*.











