---
permalink: maintain/restoring-volume.html
sidebar: sidebar
keywords: storagegrid, restore, volume
summary: 'You can restore object data for a failed storage volume or storage node using Grid Manager. You can also use Grid Manager to monitor restoration processes in progress and display a restoration history.'
---
= Restore object data using Grid Manager (automated process)
:icons: font
:imagesdir: ../media/

[.lead]
You can restore object data for a failed storage volume or storage node using Grid Manager. You can also use Grid Manager to monitor restoration processes in progress and display a restoration history.

.What you'll need

* You have link:../maintain/remounting-and-reformatting-appliance-storage-volumes.html[formatted failed volumes] before beginning the restoration.

* You have confirmed that the Storage Node where you are restoring objects has a Connection State of *Connected* image:../media/icon_alert_green_checkmark.png[icon alert green checkmark] on the *NODES* > *Overview* tab in the Grid Manager.

*	You have confirmed that none of the following are true:
** Grid expansion to add a Storage Node is in process
** Storage Node decommission in process or failed 
+ 
NOTE: You can force a volume or node restoration to start when a decommission is paused.
** Recovery of a failed storage volume is in process
** Recovery of a Storage Node with a failed system drive is in process
** EC rebalance is in process
** Appliance node cloning is in process

.About this task

When one or more storage volumes fail, Grid Manger displays them as candidates for restoration on the volume restoration pending data tab.

When possible, use Grid Manager for restoring storage volumes and nodes. You can also use Grid Manager to <<view_restoration_progress,monitor the volume restoration process>> and <<view_restoration_history,view restoration history>>. If necessary, you can follow the link:../maintain/restoring-object-data-to-storage-volume-for-appliance.html[manual steps to restore volumes and nodes].

// Remove commented lines following review approval. Per Dheeraj, use of UI for node recovery was a late change:
// * If you are _restoring_ a storage node, use <<restore_lost_volume_or_node,Grid Manager to restore volumes>>.
// * If you are _recovering_ a storage node, use link:../maintain/recovering-storagegrid-appliance-storage-node.html[manual steps to restore volumes]. 

Two types of data objects can be restored:

* Erasure coded (EC) data objects are restored by reassembling the stored fragments. Corrupt or lost fragments are recreated by the erasure-coding algorithm from the remaining data and parity fragments.
* Replicated data objects are restored from other locations, assuming that the grid's ILM rules were configured to make object copies available. 
** If an ILM rule was configured to store only one replicated copy and that copy existed on a storage volume that failed, you will not be able to recover the object.
** If the only remaining copy of an object is in a Cloud Storage Pool, StorageGRID must issue multiple requests to the Cloud Storage Pool endpoint to restore object data. 
** If the only remaining copy of an object is on an Archive Node, object data is retrieved from the Archive Node. Restoring object data to a Storage Node from an Archive Node takes longer than restoring object copies from other Storage Nodes.

NOTE: Replicated data restoration is dependent on the availability of resources where the replicated copies are stored. Progress of replicated data restoration is nonlinear and might take days or weeks to complete.

== Restore failed volume or node

.Steps

To restore a failed volume or node:

. In Grid Manager go to *Maintenance* > *Volume restoration*.

. Select the *Nodes to restore* tab.
+
The number on the tab indicates the number of nodes with volumes requiring restoration.

image::../media/vol-restore-nodes-to-restore.png[Volume restoration - Nodes to restore tab]

. Expand each node to see the volumes in it that need restoration and their status.
 
. Correct any issues preventing restoration of each volume, as indicated.

. Select a node to restore where all the volumes indicate a Ready to restore status.
+
You can only restore the volumes for one node at a time.
+
Each volume in the node must indicate that it is ready to restore.

. Select *Start restore*.

. Address any warnings that might display or select *Start anyway* to ignore the warnings and start the restoration.

Nodes are moved from the Nodes to restore tab to the Restoration progress tab when the restoration starts.

If a volume restoration fails, the node returns to the Nodes to restore tab.

== View restoration progress

The Restoration progress tab shows the status of the volume restoration process and information about the volumes for a node being restored.

image::../media/vol-restore-restore-progress.png[Volume restoration - Restoration progress tab]

Data repair rates for replicated and erasure-coded objects in all volumes are estimates summarizing all restorations in process, including those restorations initiated using manual steps. The percentage of objects in those volumes that are intact and do not require restoration is also indicated.

NOTE: Replicated data restoration is dependent on the availability of resources where the replicated copies are stored. Progress of replicated data restoration is nonlinear and might take days or weeks to complete.

The Restoration jobs section displays information about volume restorations started from Grid Manager.

* The number in the Restoration jobs section heading indicates the number of volumes that are either being restored or queued for restoration.

* The table displays information about each volume in a node being restored and its progress.

** The progress for each node displays an exact percentage for each volume, not an estimate.
** Expand the Details column to display the restoration start time and job ID.

* If a volume restoration fails:
** The Status column indicates failed
** A warning displays, indicating the cause of failure.
+
Correct the issues indicated in the warning and then select *Retry* to re-initiate the volume restoration. 
+
If multiple restoration jobs have failed, selecting *Retry* starts the most recently failed job.

== View restoration history

The Restoration history tab shows information about all volume restorations that have successfully completed.

image::../media/vol-restore-restore-history.png[Volume restoration - Restoration history tab]
